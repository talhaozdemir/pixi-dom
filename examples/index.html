<!DOCTYPE html>
<html>

<head>
  <title>PIXI CSS</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      user-select: none;
    }

    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    #pixi-content {
      background: #000000;
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <script src="https://pixijs.download/dev/pixi.min.js"></script>
  <script src="../dist/pixi-css.js"></script>
  <script type="module">
    const app = new PIXI.Application();
    await app.init({ width: 800, height: 800, preference: "webgl" });
    document.body.appendChild(app.canvas);

    const htmlCont = new PIXI.CSS.HTMLContainer({
      htmlContent: `
        <div class="grid">
            <div class="hud" style="grid-area: hud;">hud</div>
            <div class="skillBar" style="grid-area: skillBar;">skillBar</div>
            <div class="gameArea" style="grid-area: gameArea;">gameArea</div>
            <div class="adsArea" style="grid-area: adsArea;">adsArea</div>
        </div>`,
      cssContent: `
        .grid {
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-areas: 
            "hud hud"
            "skillBar gameArea"
            "adsArea adsArea";
            grid-template-rows: 100px 1fr 100px;
            grid-template-columns: 1fr 6fr;
        }`,
    });
    app.stage.addChild(htmlCont);

    const hudWrapper = htmlCont.getWrapperByLabel("hud");

    const bunnyTexture = await PIXI.Assets.load("https://pixijs.com/assets/bunny.png");

    const sprite = PIXI.Sprite.from(bunnyTexture);
    sprite.anchor.set(0.5);
    sprite.width = 32;
    sprite.height = 32;
    sprite.tint = 0xffffff;
    sprite.baseWidth = sprite.texture.orig.width;
    sprite.baseHeight = sprite.texture.orig.height;
    hudWrapper.addChild(sprite);

    sprite.resizeData = {
      portrait: {
        location: {
          x: "right",
          y: "bottom"
        },
        offset: {
          unit: "self",
          x: -0.5,
          y: -0.5
        },
        scale: {
          type: "relative",
          fit: "min",
          x: 0.8,
          y: 0.8
        }
      }
    }

    // sprite.resize = (w, h) => {
    //   const wRatio = (w * 0.5) / sprite.texture.orig.width;
    //   const hRatio = (h * 0.5) / sprite.texture.orig.height;
    //   sprite.scale.set(Math.min(wRatio, hRatio));

    //   sprite.x = w / 2;
    //   sprite.y = h / 2;
    // };

    //   let elapsed = 0.0;
    //   app.ticker.add((ticker) => {
    //     elapsed += ticker.deltaTime;
    //     sprite.angle = Math.cos(elapsed / 50.0) * 100.0;
    //   });

    new PIXI.CSS.Responsive(app.renderer, app.stage);
  </script>
</body>

</html>